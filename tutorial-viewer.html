<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìö Tutorial ATmega328P - Visualizador Interactivo</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 300px 1fr;
            grid-template-rows: auto 1fr;
            min-height: 100vh;
            background: white;
            box-shadow: 0 0 50px rgba(0,0,0,0.1);
        }

        .header {
            grid-column: 1 / -1;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .sidebar {
            background: #f8f9fa;
            border-right: 1px solid #e9ecef;
            overflow-y: auto;
            padding: 20px;
        }

        .nav-section {
            margin-bottom: 30px;
        }

        .nav-section h3 {
            color: #495057;
            margin-bottom: 15px;
            font-size: 1.1em;
            border-bottom: 2px solid #dee2e6;
            padding-bottom: 8px;
        }

        .nav-item {
            display: block;
            padding: 12px 15px;
            margin-bottom: 8px;
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            text-decoration: none;
            color: #495057;
            transition: all 0.3s ease;
            cursor: pointer;
            font-size: 0.95em;
        }

        .nav-item:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .nav-item.active {
            background: #28a745;
            color: white;
            border-color: #28a745;
        }

        .nav-item .emoji {
            margin-right: 8px;
        }

        .nav-item .time {
            float: right;
            font-size: 0.8em;
            opacity: 0.7;
        }

        .content {
            padding: 30px;
            overflow-y: auto;
            line-height: 1.6;
        }

        .content h1 {
            color: #2c3e50;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid #667eea;
        }

        .content h2 {
            color: #34495e;
            margin: 30px 0 15px 0;
            padding-left: 15px;
            border-left: 4px solid #3498db;
        }

        .content h3 {
            color: #555;
            margin: 25px 0 10px 0;
        }

        .content pre {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            border-left: 4px solid #667eea;
        }

        .content code {
            background: #f1f3f4;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', monospace;
            color: #e91e63;
        }

        .content pre code {
            background: none;
            padding: 0;
            color: inherit;
        }

        .content blockquote {
            background: #f8f9fa;
            border-left: 4px solid #28a745;
            padding: 15px 20px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }

        .content table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .content th,
        .content td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
        }

        .content th {
            background: #667eea;
            color: white;
            font-weight: 600;
        }

        .content tr:hover {
            background: #f8f9fa;
        }

        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
            font-size: 1.2em;
            color: #667eea;
        }

        .error {
            background: #ffe6e6;
            color: #d63031;
            padding: 20px;
            border-radius: 8px;
            margin: 20px;
            border-left: 4px solid #d63031;
        }

        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            height: 3px;
            background: #28a745;
            z-index: 1000;
            transition: width 0.3s ease;
        }

        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
                grid-template-rows: auto auto 1fr;
            }

            .sidebar {
                border-right: none;
                border-bottom: 1px solid #e9ecef;
                max-height: 300px;
            }

            .nav-item {
                display: inline-block;
                margin: 5px;
                padding: 8px 12px;
            }
        }

        .welcome-screen {
            text-align: center;
            padding: 60px 40px;
        }

        .welcome-screen h2 {
            color: #667eea;
            margin-bottom: 20px;
            border: none;
            padding: 0;
        }

        .welcome-screen .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }

        .feature-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #e9ecef;
        }

        .feature-card h3 {
            color: #495057;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="progress-bar" id="progressBar"></div>
    <div class="container">
        <div class="header">
            <h1>üìö Tutorial ATmega328P</h1>
            <p>Visualizador Interactivo - De Microchip Studio a macOS Professional</p>
        </div>

        <nav class="sidebar">
            <div class="nav-section">
                <h3>üî∞ Configuraci√≥n B√°sica</h3>
                <div class="nav-item" data-file="tutorial/README.md">
                    <span class="emoji">üè†</span> Inicio
                </div>
                <div class="nav-item" data-file="tutorial/01-requisitos.md">
                    <span class="emoji">‚úÖ</span> Requisitos
                    <span class="time">3 min</span>
                </div>
                <div class="nav-item" data-file="tutorial/02-instalacion-basica.md">
                    <span class="emoji">üõ†Ô∏è</span> Instalaci√≥n B√°sica
                    <span class="time">10 min</span>
                </div>
                <div class="nav-item" data-file="tutorial/03-configurar-shell.md">
                    <span class="emoji">‚öôÔ∏è</span> Configurar Shell
                    <span class="time">3 min</span>
                </div>
                <div class="nav-item" data-file="tutorial/04-workflow-diario.md">
                    <span class="emoji">‚ö°</span> Workflow Diario
                    <span class="time">5 min</span>
                </div>
            </div>

            <div class="nav-section">
                <h3>üîß Configuraci√≥n Avanzada</h3>
                <div class="nav-item" data-file="tutorial/05-configurar-vscode.md">
                    <span class="emoji">üíª</span> Configurar VS Code
                    <span class="time">12 min</span>
                </div>
                <div class="nav-item" data-file="tutorial/06-primer-proyecto.md">
                    <span class="emoji">üéØ</span> Primer Proyecto
                    <span class="time">10 min</span>
                </div>
                <div class="nav-item" data-file="tutorial/07-hardware-xplain.md">
                    <span class="emoji">üîå</span> Hardware Xplain
                    <span class="time">8 min</span>
                </div>
                <div class="nav-item" data-file="tutorial/08-proyectos-ejemplo.md">
                    <span class="emoji">üöÄ</span> Proyectos Ejemplo
                    <span class="time">15 min</span>
                </div>
            </div>

            <div class="nav-section">
                <h3>üìö Anexos</h3>
                <div class="nav-item" data-file="tutorial/anexos/comandos-referencia.md">
                    <span class="emoji">üìñ</span> Comandos Referencia
                </div>
                <div class="nav-item" data-file="tutorial/anexos/equivalencias-studio.md">
                    <span class="emoji">üîÑ</span> Equivalencias Studio
                </div>
                <div class="nav-item" data-file="tutorial/anexos/makefile-completo.md">
                    <span class="emoji">‚öôÔ∏è</span> Makefile Explicado
                </div>
                <div class="nav-item" data-file="tutorial/anexos/script-program.md">
                    <span class="emoji">üöÄ</span> Script Program
                </div>
                <div class="nav-item" data-file="tutorial/anexos/troubleshooting.md">
                    <span class="emoji">üîß</span> Troubleshooting
                </div>
            </div>
        </nav>

        <main class="content" id="content">
            <div class="welcome-screen">
                <h2>¬°Bienvenido al Tutorial Interactivo!</h2>
                <p>Selecciona cualquier secci√≥n del men√∫ lateral para comenzar tu aprendizaje.</p>

                <div class="features">
                    <div class="feature-card">
                        <h3>üéØ Gu√≠a Paso a Paso</h3>
                        <p>Tutorial completo con tiempos estimados y verificaciones</p>
                    </div>
                    <div class="feature-card">
                        <h3>‚ö° Workflow Profesional</h3>
                        <p>Aprende comandos que usan profesionales reales</p>
                    </div>
                    <div class="feature-card">
                        <h3>üîß Configuraci√≥n Completa</h3>
                        <p>De cero a entorno profesional de desarrollo</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        class TutorialViewer {
            constructor() {
                this.content = document.getElementById('content');
                this.progressBar = document.getElementById('progressBar');
                this.initEventListeners();
                this.loadedFiles = new Map();
            }

            initEventListeners() {
                document.querySelectorAll('.nav-item[data-file]').forEach(item => {
                    item.addEventListener('click', (e) => {
                        e.preventDefault();
                        this.loadFile(item.dataset.file, item);
                    });
                });
            }

            async loadFile(filePath, navItem) {
                try {
                    // Actualizar UI
                    document.querySelectorAll('.nav-item').forEach(item => {
                        item.classList.remove('active');
                    });
                    navItem.classList.add('active');

                    // Mostrar loading
                    this.content.innerHTML = '<div class="loading">üìÑ Cargando contenido...</div>';
                    this.updateProgress(30);

                    let content;
                    if (this.loadedFiles.has(filePath)) {
                        content = this.loadedFiles.get(filePath);
                    } else {
                        // Intentar cargar el archivo
                        try {
                            const response = await fetch(filePath);
                            if (!response.ok) throw new Error(`HTTP ${response.status}`);
                            content = await response.text();
                            this.loadedFiles.set(filePath, content);
                        } catch (fetchError) {
                            // Si falla el fetch, usar contenido embebido
                            content = this.getEmbeddedContent(filePath);
                        }
                    }

                    this.updateProgress(70);

                    // Renderizar markdown
                    const htmlContent = marked.parse(content);
                    this.content.innerHTML = htmlContent;

                    // Scroll to top
                    this.content.scrollTop = 0;

                    this.updateProgress(100);
                    setTimeout(() => this.updateProgress(0), 500);

                } catch (error) {
                    console.error('Error loading file:', error);
                    this.content.innerHTML = `
                        <div class="error">
                            <h3>‚ùå Error al cargar el archivo</h3>
                            <p>No se pudo cargar: <strong>${filePath}</strong></p>
                            <p>Aseg√∫rate de que el archivo existe y es accesible.</p>
                            <p><em>Error: ${error.message}</em></p>
                        </div>
                    `;
                }
            }

            updateProgress(width) {
                this.progressBar.style.width = width + '%';
            }

            getEmbeddedContent(filePath) {
                // Contenido embebido para cuando no se pueden cargar los archivos
                const embeddedContent = {
                    'tutorial/README.md': `# üöÄ Tutorial ATmega328P en Mac - Gu√≠a Completa

## üëã ¬°Bienvenido!

Esta gu√≠a te ayudar√° a **migrar de Microchip Studio (Windows) a un entorno profesional en macOS** para programar microcontroladores ATmega328P en Assembly usando VS Code.

### üéØ **¬øQu√© vas a lograr?**
- ‚úÖ Configurar un entorno de desarrollo **m√°s r√°pido** que Microchip Studio
- ‚úÖ Programar ATmega328P con **un solo comando**: \`program archivo\`
- ‚úÖ Tener **syntax highlighting** y autocompletado profesional
- ‚úÖ **Workflow optimizado** para desarrollo de microcontroladores
- ‚úÖ **Estructura de proyecto profesional** con carpetas organizadas

### üìÅ **Estructura final que tendr√°s:**
\`\`\`
tu_proyecto/
‚îú‚îÄ‚îÄ src/                     # üìù Tu c√≥digo fuente (.asm)
‚îú‚îÄ‚îÄ build/                   # üîß Archivos generados (.hex, .elf, .o)
‚îú‚îÄ‚îÄ Makefile                 # ‚öôÔ∏è Automatizaci√≥n de compilaci√≥n
‚îú‚îÄ‚îÄ program                  # üöÄ Script m√°gico para programar
‚îî‚îÄ‚îÄ .gitignore              # üóëÔ∏è Mantiene tu repo limpio
\`\`\`

### ‚è±Ô∏è **Tiempo total estimado:** 45-60 minutos

---

## üìã **√çndice del Tutorial**

Sigue el orden sugerido en el men√∫ lateral para una experiencia de aprendizaje √≥ptima.

**Nota:** Para visualizar el contenido completo de cada archivo, aseg√∫rate de que este archivo HTML est√© en la misma carpeta que la carpeta \`tutorial/\`.`,

                    'tutorial/01-requisitos.md': `# ‚úÖ 01 - Requisitos del Sistema

## üìã **Verificaciones Previas**

### üñ•Ô∏è **macOS**
- ‚úÖ macOS 10.15+ (Catalina o superior)
- ‚úÖ 4GB+ de RAM disponible
- ‚úÖ 2GB+ de espacio en disco

### üîå **Hardware Necesario**
- ‚úÖ **Xplain Mini ATmega328P** (recomendado)
- ‚úÖ Cable USB para conexi√≥n
- ‚úÖ LED y resistencia (opcional para pruebas)

### üíª **Software que Instalaremos**
- üõ†Ô∏è **Homebrew** - Gestor de paquetes para Mac
- ‚öôÔ∏è **AVR Toolchain** - Compilador y herramientas
- üíª **VS Code** - Editor profesional
- üîß **AVRDUDE** - Programador de microcontroladores

¬°Contin√∫a con la instalaci√≥n b√°sica!`,

                    'tutorial/02-instalacion-basica.md': `# üõ†Ô∏è 02 - Instalaci√≥n B√°sica

## **PASO 1: Instalar Homebrew**

\`\`\`bash
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
\`\`\`

## **PASO 2: Instalar AVR Toolchain**

\`\`\`bash
brew install avr-gcc avrdude
\`\`\`

## **PASO 3: Obtener Proyecto Completo**

\`\`\`bash
cd ~/Desktop
git clone https://github.com/blorenzo-ceibal/ATmega328P_Assembly.git
cd ATmega328P_Assembly
chmod +x program
\`\`\`

## **PASO 4: Verificar Instalaci√≥n**

\`\`\`bash
avr-gcc --version
avrdude -?
program -h
\`\`\`¬°Listo para el siguiente paso!`,

                    'tutorial/03-configurar-shell.md': `# ‚ö° 03 - Configurar Shell para Uso Global

> **‚è±Ô∏è Tiempo estimado:** 3 minutos
> **üéØ Objetivo:** Configurar el comando \`program\` para usar desde cualquier directorio
> **üìã Prerequisito:** Haber completado [02-instalacion-basica.md](02-instalacion-basica.md) ‚úÖ

## üåü **¬øPor qu√© configurar esto?**

Hasta ahora has usado \`program archivo.asm\`, pero esto te limita a estar siempre en la carpeta del tutorial.

**Con esta configuraci√≥n podr√°s:**
- ‚úÖ Usar \`program archivo.asm\` desde **cualquier directorio**
- ‚úÖ Crear proyectos en **cualquier carpeta** de tu Mac
- ‚úÖ Workflow m√°s **profesional** y c√≥modo
- ‚úÖ **Mismo comando** sin importar d√≥nde est√©s

## üöÄ **Configuraci√≥n Autom√°tica del Alias**

Ejecuta este script en tu terminal:

\`\`\`bash
# Configuraci√≥n autom√°tica del comando 'program'
configure_program_alias() {
    echo "üîç Configurando alias global para 'program'..."

    # Buscar repositorio
    if [[ "\$(pwd)" == *"ATmega328P_Assembly"* ]] && [ -x "\$(pwd)/program" ]; then
        REPO_PATH="\$(pwd)"
        echo "‚úÖ Usando directorio actual: \$REPO_PATH"
    else
        REPO_PATH=\$(find "\$HOME" -name "ATmega328P_Assembly" -type d 2>/dev/null | head -1)
        if [ -n "\$REPO_PATH" ] && [ -x "\$REPO_PATH/program" ]; then
            echo "‚úÖ Repositorio encontrado: \$REPO_PATH"
        else
            echo "‚ùå No se encontr√≥ el repositorio"
            return 1
        fi
    fi

    # Configurar alias
    echo "" >> ~/.zshrc
    echo "# ATmega328P Programming Command - \$(date '+%Y-%m-%d')" >> ~/.zshrc
    echo "alias program='\$REPO_PATH/program'" >> ~/.zshrc

    echo "üéâ Alias configurado correctamente"
    source ~/.zshrc

    if command -v program >/dev/null 2>&1; then
        echo "‚úÖ ¬°Listo! Usa 'program archivo.asm' desde cualquier directorio"
    fi
}

# Ejecutar configuraci√≥n
configure_program_alias
\`\`\`

## ‚úÖ **Verificar Configuraci√≥n**

\`\`\`bash
# Probar desde otro directorio
cd ~/Desktop
program simple_blink
\`\`\`

**¬°Ahora puedes crear proyectos en cualquier carpeta de tu Mac!**`,

                    'tutorial/04-workflow-diario.md': `# ‚ö° 04 - Tu Workflow Diario

## üöÄ **¬°El Comando M√°gico!**

Ahora que tienes configurado el alias global:

\`\`\`bash
# Tu nuevo comando favorito:
program mi_archivo
\`\`\`

**¬°Eso es todo!** Un comando que:
- ‚úÖ **Compila** tu c√≥digo Assembly
- ‚úÖ **Programa** el ATmega328P autom√°ticamente
- ‚úÖ **Verifica** que todo sali√≥ bien
- ‚úÖ **Te dice** si hay errores

## üí° **Ejemplos Reales**

\`\`\`bash
# Hacer parpadear un LED (archivos incluidos en el proyecto)
program simple_blink

# Programa m√°s avanzado
program blink2

# Tus propios proyectos
program mi_proyecto
\`\`\``,

                    'tutorial/05-configurar-vscode.md': `# üíª 05 - Configurar VS Code

## **Instalar VS Code**

1. Descargar desde: https://code.visualstudio.com/
2. Instalar normalmente

## **Extensiones Esenciales**

\`\`\`
1. AVR Assembly (syntax highlighting)
2. Better Comments
3. Bracket Pair Colorizer
4. GitLens
\`\`\`

## **Configurar Tema y Font**

Recomendado: **Dark+ theme** con **Monaco** font para mejor legibilidad del c√≥digo Assembly.`,

                    'tutorial/06-primer-proyecto.md': `# üéØ 05 - Tu Primer Proyecto

## **PASO 1: Crear Estructura**

\`\`\`bash
mkdir mi_primer_atmega
cd mi_primer_atmega
mkdir src
\`\`\`

## **PASO 2: C√≥digo LED Parpadeante**

Crea \`src/simple_blink.asm\`:

\`\`\`assembly
.include "m328pdef.inc"

.equ LED_PIN, 5

.text
.global main

main:
    ; Configurar stack pointer
    ldi r16, lo8(RAMEND)
    out SPL, r16
    ldi r16, hi8(RAMEND)
    out SPH, r16

    ; PB5 como salida
    sbi DDRB, LED_PIN

main_loop:
    ; Encender LED
    sbi PORTB, LED_PIN
    rcall delay

    ; Apagar LED
    cbi PORTB, LED_PIN
    rcall delay

    rjmp main_loop

delay:
    ; Delay simple
    ldi r18, 20
delay_loop:
    ldi r19, 200
inner_loop:
    nop
    dec r19
    brne inner_loop
    dec r18
    brne delay_loop
    ret
\`\`\`

## **PASO 3: Programar**

\`\`\`bash
program simple_blink
\`\`\`

¬°Deber√≠as ver tu LED parpadeando! üéâ`,

                    // Contenido de los anexos
                    'tutorial/anexos/comandos-referencia.md': `# üìñ Comandos de Referencia R√°pida

## üöÄ **Comandos Principales**

### **Compilaci√≥n y Programaci√≥n**
\`\`\`bash
# El comando todo-en-uno
program archivo.asm

# Compilar sin programar
make compile-archivo

# Limpiar archivos generados
make clean

# Ver tama√±o del programa
make size
\`\`\`

### **AVR-GCC Directo**
\`\`\`bash
# Compilar Assembly
avr-gcc -mmcu=atmega328p -x assembler-with-cpp -c archivo.asm -o archivo.o

# Enlazar
avr-gcc -mmcu=atmega328p archivo.o -o archivo.elf

# Crear HEX
avr-objcopy -O ihex archivo.elf archivo.hex

# Programar con AVRDUDE
avrdude -c xplainedmini -p atmega328p -P usb -U flash:w:archivo.hex:i
\`\`\`

### **Verificaci√≥n de Hardware**
\`\`\`bash
# Listar programadores
avrdude -c ?

# Test de conexi√≥n Xplain Mini
avrdude -c xplainedmini -p atmega328p -P usb

# Leer informaci√≥n del chip
avrdude -c xplainedmini -p atmega328p -P usb -v
\`\`\`

## üõ†Ô∏è **Comandos de Sistema**

### **Homebrew**
\`\`\`bash
# Actualizar herramientas
brew update && brew upgrade

# Reinstalar AVR toolchain
brew reinstall avr-gcc avrdude
\`\`\`

### **Gesti√≥n de Archivos**
\`\`\`bash
# Ver estructura del proyecto
tree                 # Instalar con: brew install tree

# Buscar archivos .asm
find . -name "*.asm"

# Ver archivos generados
ls -la build/
\`\`\``,

                    'tutorial/anexos/equivalencias-studio.md': `# üîÑ Equivalencias Microchip Studio ‚Üí Mac

## üéØ **Migraci√≥n Completa de Workflow**

### **Crear Nuevo Proyecto**

| Microchip Studio | Mac Terminal |
|------------------|--------------|
| File ‚Üí New ‚Üí Project | \`mkdir proyecto && cd proyecto\` |
| Seleccionar ATmega328P | \`mkdir src\` |
| Configurar compilador | *Autom√°tico con Makefile* |

### **Compilar Proyecto**

| Microchip Studio | Mac |
|------------------|-----|
| **Build** ‚Üí Build Solution (F7) | \`program archivo.asm\` |
| Ver errores en Output | *Errores se muestran en terminal* |
| **Build** ‚Üí Clean Solution | \`make clean\` |

### **Programar Microcontrolador**

| Microchip Studio | Mac |
|------------------|-----|
| **Tools** ‚Üí Device Programming | \`program archivo.asm\` |
| Seleccionar Tool: Xplain Mini | *Autom√°tico* |
| Apply ‚Üí Program | *Autom√°tico* |

### **Debug y Verificaci√≥n**

| Microchip Studio | Mac |
|------------------|-----|
| **Debug** ‚Üí Start Debugging | *Usar UART + monitor serie* |
| Breakpoints | *Usar \`printf\` via UART* |
| Watch variables | *Enviar valores por serie* |
| Memory view | \`avr-objdump -h archivo.elf\` |

### **Gesti√≥n de Archivos**

| Microchip Studio | Mac |
|------------------|-----|
| Solution Explorer | \`tree\` o Finder |
| Add ‚Üí Existing Item | \`cp archivo.asm src/\` |
| Properties | \`ls -la\` |

## üí° **Ventajas del Setup Mac**

### ‚úÖ **M√°s R√°pido**
- **Compilaci√≥n**: ~2-3 segundos vs ~10-15 en Studio
- **Programaci√≥n**: ~5 segundos vs ~15-20 en Studio
- **Startup**: Instant√°neo vs ~30 segundos Studio

### ‚úÖ **M√°s Flexible**
- **Git integrado**: Control de versiones nativo
- **Terminal poderoso**: Scripting y automatizaci√≥n
- **VS Code**: Extensions y customizaci√≥n

### ‚úÖ **M√°s Profesional**
- **Workflow industria**: Lo que usan desarrolladores reales
- **Cross-platform**: El mismo setup funciona en Linux
- **Makefiles**: Est√°ndar en proyectos grandes

## üéì **Tips para Ex-usuarios de Studio**

### **Muscle Memory**
- **F7** ‚Üí \`program archivo.asm\`
- **Ctrl+Shift+B** ‚Üí \`make all\`
- **F5** ‚Üí \`program archivo && make monitor\`

### **Buscar y Reemplazar**
- **Ctrl+H** ‚Üí VS Code: \`Cmd+Option+F\`
- **Go to Definition** ‚Üí VS Code: \`Cmd+Click\`

### **Project Templates**
En lugar de templates de Studio, usa:
\`\`\`bash
# Template b√°sico
cp ~/templates/basic_atmega328.asm src/main.asm

# O crea scripts
./create_project.sh mi_nuevo_proyecto
\`\`\``,

                    'tutorial/anexos/makefile-completo.md': `# üìã Makefile Completo Documentado

> **üéØ Objetivo:** Entender cada l√≠nea del Makefile para ATmega328P
> **üìã Nivel:** Intermedio - para usuarios que quieren personalizar

## üîß **Makefile Completo con Documentaci√≥n**

\`\`\`makefile
# ===============================================
# CONFIGURACI√ìN DE DIRECTORIOS
# ===============================================
# Directorio para archivos fuente (.asm)
SRC_DIR = src

# Directorio para archivos generados (.o, .elf, .hex)
BUILD_DIR = build

# ===============================================
# CONFIGURACI√ìN DEL PROYECTO
# ===============================================
# Especificar microcontrolador objetivo
MCU = atmega328p

# Frecuencia del cristal/reloj (importante para delays)
F_CPU = 16000000UL

# Nombre del archivo principal (cambia seg√∫n tu proyecto)
TARGET = main

# ===============================================
# HERRAMIENTAS DEL TOOLCHAIN
# ===============================================
# Compilador para AVR (convierte Assembly ‚Üí objeto)
CC = avr-gcc

# Conversor de formato (ELF ‚Üí HEX)
OBJCOPY = avr-objcopy

# Programador (sube c√≥digo al microcontrolador)
AVRDUDE = avrdude

# ===============================================
# FLAGS DEL COMPILADOR
# ===============================================
ASFLAGS = -mmcu=\$(MCU) \\
          -I. \\
          -x assembler-with-cpp \\
          -g

# ===============================================
# TARGETS PRINCIPALES
# ===============================================

# Crear directorio build si no existe
\$(BUILD_DIR):
	@mkdir -p \$(BUILD_DIR)

# Compilar archivo espec√≠fico
compile-%: \$(SRC_DIR)/%.asm | \$(BUILD_DIR)
	\$(CC) \$(ASFLAGS) -c \$< -o \$(BUILD_DIR)/\$*.o
	\$(CC) -mmcu=\$(MCU) \$(BUILD_DIR)/\$*.o -o \$(BUILD_DIR)/\$*.elf
	\$(OBJCOPY) -O ihex \$(BUILD_DIR)/\$*.elf \$(BUILD_DIR)/\$*.hex

# Programar archivo espec√≠fico
program-xplain-%: \$(BUILD_DIR)/%.hex
	\$(AVRDUDE) -c xplainedmini -p \$(MCU) -P usb -U flash:w:\$<:i

# Limpiar archivos generados
clean:
	rm -rf \$(BUILD_DIR)

# Ver tama√±o de programa
size: \$(BUILD_DIR)/\$(TARGET).elf
	avr-size --format=avr --mcu=\$(MCU) \$<

.PHONY: clean size
\`\`\`

## üìÅ **Estructura de Directorios Profesional**

**El Makefile est√° dise√±ado para mantener tu proyecto organizado:**

\`\`\`
tu_proyecto/
‚îú‚îÄ‚îÄ src/                     # üìù C√≥digo fuente (.asm)
‚îÇ   ‚îú‚îÄ‚îÄ simple_blink.asm
‚îÇ   ‚îú‚îÄ‚îÄ main.asm
‚îÇ   ‚îî‚îÄ‚îÄ button_test.asm
‚îú‚îÄ‚îÄ build/                   # üîß Archivos generados (auto-creado)
‚îÇ   ‚îú‚îÄ‚îÄ simple_blink.o
‚îÇ   ‚îú‚îÄ‚îÄ simple_blink.elf
‚îÇ   ‚îú‚îÄ‚îÄ simple_blink.hex
‚îÇ   ‚îî‚îÄ‚îÄ simple_blink.lst
‚îú‚îÄ‚îÄ Makefile                 # ‚öôÔ∏è Este archivo
‚îú‚îÄ‚îÄ program                  # üöÄ Script de programaci√≥n
‚îî‚îÄ‚îÄ .gitignore              # üóëÔ∏è Para Git (excluir build/)
\`\`\`

### üìã **Ventajas de esta estructura:**

- **Limpio:** Archivos fuente separados de generados
- **Profesional:** Est√°ndar en la industria
- **Git-friendly:** Easy \`.gitignore\` para \`build/\`
- **Escalable:** F√°cil agregar m√°s archivos fuente

### üîß **El Makefile auto-crea directorios:**

\`\`\`makefile
# Crear directorio build/ si no existe
\$(BUILD_DIR):
	@mkdir -p \$(BUILD_DIR)

# Todas las compilaciones dependen de que exista build/
%.o: \$(SRC_DIR)/%.asm | \$(BUILD_DIR)
	\$(CC) \$(ASFLAGS) -c \$< -o \$(BUILD_DIR)/\$@
\`\`\`

## üéØ **Comandos de Ejemplo**

\`\`\`bash
# Compilar specific file
make compile-simple_blink

# Programar specific file
make program-xplain-simple_blink

# Ver tama√±o
make size

# Limpiar todo
make clean
\`\`\``,

                    'tutorial/anexos/script-program.md': `# üöÄ Script Program - Explicaci√≥n L√≠nea por L√≠nea

> **üéØ Objetivo:** Entender completamente c√≥mo funciona el script \`program\`
> **üìã Nivel:** Intermedio - para usuarios que quieren personalizar

## üåü **Caracter√≠sticas Principales**

### ‚ú® **B√∫squeda Inteligente de Archivos**
- üîç Busca primero en \`src/\` (estructura profesional)
- üîÑ Fallback al directorio actual (compatibilidad)
- üìÅ Crea autom√°ticamente \`build/\` para archivos generados

### ‚ö° **Proceso Automatizado**
1. **Compilar** Assembly ‚Üí Objeto (.o)
2. **Enlazar** Objeto ‚Üí Ejecutable (.elf)
3. **Convertir** ELF ‚Üí HEX para programar
4. **Programar** directamente al microcontrolador
5. **Verificar** que todo funcion√≥

## üîß **Configuraci√≥n Principal**

\`\`\`bash
# Tipo de microcontrolador objetivo
MCU="atmega328p"

# Tipo de programador para Xplain Mini
PROGRAMMER="xplainedmini"

# Puerto de comunicaci√≥n
PORT="usb"
\`\`\`

## üé® **Sistema de Colores**

\`\`\`bash
GREEN='\\033[0;32m'      # Verde para √©xito ‚úÖ
RED='\\033[0;31m'        # Rojo para errores ‚ùå
YELLOW='\\033[1;33m'     # Amarillo para procesos ‚ö†Ô∏è
BLUE='\\033[0;34m'       # Azul para informaci√≥n ‚ÑπÔ∏è
\`\`\`

## üîç **L√≥gica de B√∫squeda de Archivos**

\`\`\`bash
# Buscar primero en src/ (estructura preferida)
if [ -f "src/\$FILE" ]; then
    SOURCE_FILE="src/\$FILE"
    echo "‚ÑπÔ∏è Archivo encontrado en estructura profesional: src/\$FILE"

# Si no est√° en src/, buscar en directorio actual (compatibilidad)
elif [ -f "\$FILE" ]; then
    SOURCE_FILE="\$FILE"
    echo "‚ö†Ô∏è Archivo encontrado en directorio actual: \$FILE"
    echo "üí° Sugerencia: Considera mover archivos .asm a carpeta src/"
\`\`\`

## üìÅ **Gesti√≥n Autom√°tica de Directorios**

\`\`\`bash
BUILD_DIR="build"

# Crear directorio build/ si no existe
if [ ! -d "\$BUILD_DIR" ]; then
    echo "üìÅ Creando directorio build/ para archivos generados..."
    mkdir -p "\$BUILD_DIR"
fi
\`\`\`

## ‚öôÔ∏è **Proceso de Compilaci√≥n**

### **Paso 1: Assembly ‚Üí Objeto**
\`\`\`bash
avr-gcc -mmcu="\$MCU" \\
        -I. \\
        -x assembler-with-cpp \\
        -g \\
        -c "\$SOURCE_FILE" \\
        -o "\$BUILD_DIR/\${BASENAME}.o"
\`\`\`

### **Paso 2: Enlazado**
\`\`\`bash
avr-gcc -mmcu="\$MCU" \\
        "\$BUILD_DIR/\${BASENAME}.o" \\
        -o "\$BUILD_DIR/\${BASENAME}.elf"
\`\`\`

### **Paso 3: Conversi√≥n a HEX**
\`\`\`bash
avr-objcopy -j .text \\
            -j .data \\
            -O ihex \\
            "\$BUILD_DIR/\${BASENAME}.elf" \\
            "\$BUILD_DIR/\${BASENAME}.hex"
\`\`\`

### **Paso 4: Programaci√≥n**
\`\`\`bash
avrdude -c "\$PROGRAMMER" \\
        -p "\$MCU" \\
        -P "\$PORT" \\
        -U flash:w:"\$BUILD_DIR/\${BASENAME}.hex":i
\`\`\`

## üìä **An√°lisis de Tama√±o**

\`\`\`bash
# Mostrar cu√°nta memoria usa el programa
avr-size --format=avr \\
         --mcu="\$MCU" \\
         "\$BUILD_DIR/\${BASENAME}.elf"
\`\`\`

## üéØ **Ventajas vs Compilaci√≥n Manual**

| Aspecto | Manual | Script \`program\` |
|---------|--------|-------------------|
| **Comandos** | 4+ comandos | 1 comando |
| **Errores** | F√°cil equivocarse | Manejo autom√°tico |
| **Organizaci√≥n** | Archivos mezclados | Estructura profesional |
| **Tiempo** | ~2-3 minutos | ~10 segundos |
| **Debugging** | Dif√≠cil | Mensajes claros |

## üí° **Personalizaci√≥n**

### **Cambiar Microcontrolador**
\`\`\`bash
# Para ATmega168
MCU="atmega168"

# Para ATmega32u4
MCU="atmega32u4"
\`\`\`

### **Agregar M√°s Funciones**
\`\`\`bash
# Funci√≥n para generar listado
generate_listing() {
    avr-objdump -h -S "\$BUILD_DIR/\${BASENAME}.elf" > "\$BUILD_DIR/\${BASENAME}.lst"
    echo "üìÑ Listado generado: build/\${BASENAME}.lst"
}
\`\`\``,

                    'tutorial/anexos/troubleshooting.md': `# üîß Troubleshooting - Soluci√≥n de Problemas

## ‚ùå **Errores Comunes y Soluciones**

### **1. "avr-gcc: command not found"**

**Problema:** AVR toolchain no instalado o no en PATH

**Soluciones:**
\`\`\`bash
# Verificar instalaci√≥n
which avr-gcc

# Si no est√° instalado
brew install avr-gcc

# Si est√° instalado but no en PATH
echo 'export PATH="/opt/homebrew/bin:\$PATH"' >> ~/.zshrc
source ~/.zshrc
\`\`\`

### **2. "avrdude: can't find programmer"**

**Problema:** Xplain Mini no detectada

**Soluciones:**
\`\`\`bash
# Verificar conexi√≥n USB
system_profiler SPUSBDataType | grep -i xplain

# Test de conexi√≥n
avrdude -c xplainedmini -p atmega328p -P usb

# Si no funciona, reconectar USB y reintentar
\`\`\`

### **3. Errores de Compilaci√≥n Assembly**

**Problema:** Sintaxis incorrecta en c√≥digo .asm

**Errores t√≠picos:**
- \`Error: expected comma after "LED_PIN"\` ‚Üí Usar \`LED_PIN, 5\` no \`LED_PIN = 5\`
- \`Error: unknown pseudo-op: '.cseg'\` ‚Üí Usar \`.text\` en lugar de \`.cseg\`
- \`Error: constant value required\` ‚Üí Verificar definiciones en m328pdef.inc

**Soluci√≥n:**
\`\`\`bash
# Verificar sintaxis en archivo de definiciones
cat src/m328pdef.inc | head -20

# Ejemplo correcto de definici√≥n:
.equ LED_PIN, 5    # ‚úÖ Correcto
.equ LED_PIN = 5   # ‚ùå Incorrecto en avr-gcc
\`\`\`

### **4. "Permission denied" al ejecutar script**

**Problema:** Script program no tiene permisos de ejecuci√≥n

**Soluci√≥n:**
\`\`\`bash
# Dar permisos de ejecuci√≥n
chmod +x program

# Verificar permisos
ls -la program
# Deber√≠a mostrar: -rwxr-xr-x
\`\`\`

### **5. "No such file or directory: src/archivo.asm"**

**Problema:** Estructura de directorios incorrecta

**Soluci√≥n:**
\`\`\`bash
# Verificar estructura
ls -la
tree  # Si tienes tree instalado

# Crear estructura correcta
mkdir -p src
mv *.asm src/  # Mover archivos .asm a src/

# O compilar desde directorio actual
program ./mi_archivo.asm
\`\`\`

## üîç **Comandos de Diagn√≥stico**

### **Verificar Instalaci√≥n Completa**
\`\`\`bash
# Verificar todas las herramientas
avr-gcc --version
avrdude -?
make --version

# Verificar homebrew
brew doctor
\`\`\`

### **Test Hardware**
\`\`\`bash
# Informaci√≥n detallada del chip
avrdude -c xplainedmini -p atmega328p -P usb -v

# Leer fuses del microcontrolador
avrdude -c xplainedmini -p atmega328p -P usb -U lfuse:r:lfuse.hex:h
\`\`\`

### **Debug del Script**
\`\`\`bash
# Ejecutar script con debug mode
bash -x program simple_blink

# Ver variables de entorno
env | grep PATH
\`\`\`

## üíä **Soluciones R√°pidas**

### **Reset Completo del Entorno**
\`\`\`bash
# Reinstalar toolchain
brew uninstall avr-gcc avrdude
brew install avr-gcc avrdude

# Limpiar cach√© de compilaci√≥n
make clean
rm -rf build/

# Recargar configuraci√≥n shell
source ~/.zshrc
\`\`\`

### **Verificar Archivos Cr√≠ticos**
\`\`\`bash
# Verificar Makefile existe y es correcto
ls -la Makefile
head -10 Makefile

# Verificar script program
ls -la program
head -20 program
\`\`\`

## üì± **Contacto y Ayuda**

### **Informaci√≥n del Sistema**
Al reportar problemas, incluye:

\`\`\`bash
# Versi√≥n de macOS
sw_vers

# Versi√≥n herramientas
avr-gcc --version
avrdude -? 2>&1 | head -1

# Informaci√≥n USB (con Xplain conectada)
system_profiler SPUSBDataType | grep -A5 -B5 -i xplain
\`\`\`

### **Logs √ötiles**
\`\`\`bash
# Log completo de compilaci√≥n
program archivo.asm 2>&1 | tee debug.log

# Log de avrdude solamente
avrdude -c xplainedmini -p atmega328p -P usb -v 2>&1 | tee avrdude.log
\`\`\`

## üéØ **Prevenci√≥n de Problemas**

### **Buenas Pr√°cticas**
- ‚úÖ Siempre usar estructura \`src/\` y \`build/\`
- ‚úÖ Hacer \`make clean\` antes de reportar errores
- ‚úÖ Verificar conexi√≥n USB antes de programar
- ‚úÖ Mantener backup de archivos .asm
- ‚úÖ Usar control de versiones (Git)

### **Checklist Pre-Compilaci√≥n**
1. ¬øArchivo .asm existe en \`src/\`?
2. ¬øScript program tiene permisos +x?
3. ¬øXplain Mini conectada y detectada?
4. ¬øSintaxis Assembly correcta?
5. ¬øDefiniciones m328pdef.inc actualizadas?`,

                    'tutorial/07-hardware-xplain.md': `# üîå 06 - Configuraci√≥n Hardware Xplain Mini

> **‚è±Ô∏è Tiempo estimado:** 3 minutos
> **üéØ Objetivo:** Configuraci√≥n espec√≠fica y avanzada para Xplain Mini
> **üìã Prerequisito:** Haber completado [05-primer-proyecto.md](05-primer-proyecto.md) ‚úÖ

## üéØ **¬øYa funciona tu LED? ¬°Perfecto!**

Si completaste el paso anterior exitosamente, **tu hardware ya est√° funcionando**. Este paso te da informaci√≥n adicional para **optimizar y entender mejor** tu configuraci√≥n.

## üîç **PASO 1: Identificaci√≥n Completa del Hardware (1 min)**

### üîß **Informaci√≥n detallada de tu Xplain Mini:**

\`\`\`bash
# Ver informaci√≥n USB completa
system_profiler SPUSBDataType | grep -A 10 -B 5 "Xplain\\|EDBG\\|Microchip"
\`\`\`

**‚úÖ Deber√≠as ver algo como:**
\`\`\`
EDBG CMSIS-DAP:
  Product ID: 0x2111
  Vendor ID: 0x03eb (Atmel Corporation)
  Version: 1.00
  Serial Number: ATML2130031800004957
  Speed: Up to 480 Mb/s
  Manufacturer: Atmel Corp.
  Location ID: 0x14200000 / 20
\`\`\`

### üîß **Verificar puertos serie disponibles:**

\`\`\`bash
# Listar todos los puertos serie
ls /dev/cu.*

# Filtrar solo los relevantes
ls /dev/cu.usbmodem* 2>/dev/null || echo "No hay puertos usbmodem detectados"
\`\`\`

## ‚öôÔ∏è **PASO 2: Configuraci√≥n de Permisos macOS (1 min)**

### üîß **Optimizar permisos para acceso sin sudo:**

\`\`\`bash
# Agregar tu usuario al grupo de desarrolladores (mejora el acceso a dispositivos)
sudo dseditgroup -o edit -a $(whoami) -t user _developer

# Verificar que fue agregado
dseditgroup -o read _developer | grep $(whoami)
\`\`\`

**üí° Esto mejora la estabilidad de la comunicaci√≥n con la Xplain Mini.**

## üîß **PASO 3: Comandos de Diagn√≥stico Avanzados (1 min)**

### üîç **Informaci√≥n completa del microcontrolador:**

\`\`\`bash
# Test completo de comunicaci√≥n con detalles
avrdude -c xplainedmini -p atmega328p -P usb -v -v
\`\`\`

### üîß **Leer fusibles del microcontrolador:**

\`\`\`bash
# Ver configuraci√≥n actual de fusibles
avrdude -c xplainedmini -p atmega328p -P usb -U lfuse:r:-:h -U hfuse:r:-:h -U efuse:r:-:h
\`\`\`

**‚úÖ Hardware optimizado ‚Üí** **[07-proyectos-ejemplo.md](07-proyectos-ejemplo.md)**`,

                    'tutorial/08-proyectos-ejemplo.md': `# üìö 07 - Proyectos Ejemplo

> **‚è±Ô∏è Tiempo estimado:** Variable (cada proyecto 5-10 min)
> **üéØ Objetivo:** Proyectos adicionales para practicar y expandir conocimientos
> **üìã Prerequisito:** Haber completado [06-hardware-xplain.md](06-hardware-xplain.md) ‚úÖ

## üéØ **¬°Tu Setup Est√° Completo!**

Con tu entorno configurado, ahora puedes crear **cualquier proyecto** para ATmega328P. Aqu√≠ tienes ejemplos progresivos para seguir aprendiendo.

## üöÄ **Proyecto 1: Explorar los Ejemplos Incluidos (5 min)**

### üìù **Probar los programas incluidos:**

\`\`\`bash
# LED b√°sico (ya probado)
program simple_blink

# LED con efectos m√°s complejos
program blink2

# Ver diferencias en el c√≥digo
code src/simple_blink.asm
code src/blink2.asm
\`\`\`

### üí° **Comparar los dos programas:**

- **simple_blink.asm:** LED parpadea de forma simple y constante
- **blink2.asm:** LED con patrones m√°s complejos y efectos visuales

**üéØ Ejercicio:** Modifica los delays en \`blink2.asm\` para cambiar la velocidad del parpadeo.

## üîò **Proyecto 2: Lectura de Bot√≥n (7 min)**

### üìù **C√≥digo - button_test.asm:**

\`\`\`assembly
; ===============================================
; LECTURA DE BOT√ìN - ATmega328P
; ===============================================
; LED se enciende mientras se presiona el bot√≥n
; Bot√≥n en PB0, LED en PB5

#include <avr/io.h>

.section .text
.global main

main:
    ; Configurar stack pointer
    ldi r16, hi8(RAMEND)
    out _SFR_IO_ADDR(SPH), r16
    ldi r16, lo8(RAMEND)
    out _SFR_IO_ADDR(SPL), r16

    ; Configurar pines
    ldi r16, (1<<DDB5)      ; PB5 como salida (LED)
    out _SFR_IO_ADDR(DDRB), r16

    ; PB0 como entrada con pull-up interno
    ldi r16, (1<<PORTB0)    ; Activar pull-up en PB0
    out _SFR_IO_ADDR(PORTB), r16

main_loop:
    ; Leer estado del bot√≥n (PB0)
    in r17, _SFR_IO_ADDR(PINB)
    andi r17, (1<<PINB0)    ; Aislar bit 0

    ; ¬øBot√≥n presionado? (0 cuando se presiona por pull-up)
    breq button_pressed     ; Si es 0, bot√≥n presionado

button_released:
    ; Apagar LED
    cbi _SFR_IO_ADDR(PORTB), PORTB5
    rjmp main_loop

button_pressed:
    ; Encender LED
    sbi _SFR_IO_ADDR(PORTB), PORTB5
    rjmp main_loop
\`\`\`

### üöÄ **Programar y probar:**

\`\`\`bash
program button_test
# LED se enciende al presionar bot√≥n (o conectar PB0 a GND)
\`\`\`

## ‚úÖ **¬°Tu Arsenal Completo Est√° Listo!**

### üèÜ **Lo que has logrado:**
- ‚úÖ **Setup profesional** Mac para ATmega328P
- ‚úÖ **5 proyectos funcionales** de ejemplo
- ‚úÖ **Workflow optimizado** para desarrollo r√°pido
- ‚úÖ **Base s√≥lida** para proyectos universitarios
- ‚úÖ **Herramientas profesionales** nivel industria

**‚úÖ ¬°Tutorial COMPLETO! üéâ**`
                };

                return embeddedContent[filePath] || `# ‚ùå Contenido no disponible

Lo siento, el contenido para **${filePath}** no est√° disponible en modo offline.

## üí° Soluci√≥n

Para ver todo el contenido:

1. Aseg√∫rate de que este archivo HTML est√© en la carpeta ra√≠z del proyecto
2. Verifica que existe la carpeta \`tutorial/\` con todos los archivos .md
3. Si usas un servidor web local, todos los archivos se cargar√°n autom√°ticamente

## üìÅ Estructura esperada:
\`\`\`
tu_proyecto/
‚îú‚îÄ‚îÄ tutorial-viewer.html    # Este archivo
‚îú‚îÄ‚îÄ tutorial/
‚îÇ   ‚îú‚îÄ‚îÄ README.md
‚îÇ   ‚îú‚îÄ‚îÄ 01-requisitos.md
‚îÇ   ‚îú‚îÄ‚îÄ 02-instalacion-basica.md
‚îÇ   ‚îî‚îÄ‚îÄ ... (otros archivos)
‚îî‚îÄ‚îÄ src/
\`\`\``;
            }
        }

        // Inicializar cuando la p√°gina est√© lista
        document.addEventListener('DOMContentLoaded', () => {
            new TutorialViewer();
        });
    </script>
</body>
</html>
